# YAGAMER Bot 2.0

Простой телеграм‑бот на базе [aiogram](https://docs.aiogram.dev/) и `asyncio`.

## Установка

1. Создайте и активируйте виртуальное окружение:
   ```bash
   python -m venv venv
   source venv/bin/activate
   ```
2. Установите зависимости:
   ```bash
   pip install -r requirements.txt
   ```
3. Скопируйте файл `.env.example` в `.env` и укажите свои значения переменных:
   ```bash
   cp .env.example .env
   # отредактируйте .env
   ```

Пример содержимого `.env`:

```env
BOT_TOKEN=7749511637:AAH-EOLjSombpRtdHA0wQBZ7ojnvbeFlyLo
ADMIN_ID=206094225
MOD_CHAT_ID=-1002527730048
FEEDBACK_CHAT_ID=-1002548882163
FORUM_CHAT_ID=-1002816762102
```

Переменные окружения:

- `BOT_TOKEN` – токен телеграм‑бота
- `ADMIN_ID` – идентификатор администратора
- `MOD_CHAT_ID` – ID чата модерации
- `FEEDBACK_CHAT_ID` – ID чата для обратной связи
- `FORUM_CHAT_ID` – ID группы форума для модерации

После настройки переменных окружения запустите бота командой:
```bash
python bot.py
```

Бот принимает контент только после нажатия кнопки "Предложить контент" или команды `/suggest` и отправляет его модераторам.
Каждый принятый модератором материал приносит пользователю 2 XP. Свой профиль с опытом, количеством предупреждений и рангом можно посмотреть через кнопку "Профиль" или команду `/profile`.
В главном меню также доступен раздел "Турниры" с актуальными событиями и рейтингом игроков.
Во всех подменю, включая шаги создания и редактирования турниров, присутствует кнопка "Назад" для возврата к главному меню.

Бот проверяет все пользовательские сообщения на спам и ненормативную лексику.
Разрешено не более 10 сообщений в сутки, при превышении лимита новая
информация не принимается.

Бот также умеет модерировать форум‑группу, автоматически удаляя
сообщения с запрещёнными словами и начисляя 1 XP за каждое разрешённое
сообщение. Администратор может отправить рассылку командой
`/broadcast <текст>`.
Через пункт "Управление турнирами" в админ‑меню можно редактировать или удалять ранее созданные турниры.

## Структура проекта

Исходный код бота находится в каталоге `app`.
Основная точка входа — файл `bot.py`, который подключает обработчики из `app.handlers`.

## Предложение контента

Пользователь может воспользоваться командой `/suggest` или нажать кнопку "Предложить контент" и отправить боту любой контент
(фото, видео, гиф, аудио или текст). Сообщение будет переслано в чат модерации с
кнопками "Подтвердить" и "Отклонить". После решения модератору предлагается
оставить комментарий или пропустить его, а затем ответ отправляется обратно
пользователю.

## Профиль пользователя

Через команду `/profile` или кнопку "Профиль" в главном меню можно узнать свой username, накопленный опыт, количество предупреждений и текущий ранг.

## Система рангов

Ранг пользователя зависит от набранного опыта:

- 1–100 XP — **Нубик**
- 101–500 XP — **Новобранец**
- 501–1000 XP — **Бывалый**
- 1001–1500 XP — **Pro**
- 1501–2000 XP — **Мастер**
- 2001–4000 XP — **Грандмастер**
- 4001–10&nbsp;000 XP — **Легенда!**
- 10&nbsp;001–15&nbsp;000 XP — **Титан**

## Турниры

В разделе "Турниры" публикуются актуальные соревнования по CS2, Dota 2 и Valorant. Здесь также можно посмотреть рейтинг игроков.
Администраторы могут управлять турнирами через меню бота: создавать, редактировать или удалять записи.
При создании или редактировании турнира теперь можно добавить фотографию для превью, которая будет отображаться в списках турниров.
